\section{Related work}%
\label{RelatedWork}

\name is designed to allow a user, say Alice,  to deliberately exchange files stored on any device of her e-squad with a specific other user, Bob, represented by any device belonging to his e-squad, without using any provider or storage other than on Alice or Bob's respective e-squads. As a whole, \name is related to but thus differs from the following concepts: storage and sharing (cloud, P2P file sharing, P2P storage),  mixnets, and onion routing (with infrastructure or P2P).  

Cloud services that replicate files across multiple devices and help share them with other users (e.g. \emph{Dropbox}, \emph{Box}, or \emph{iCloud}) require trust in the service provider, at a minimum to keep the service running without changes to the terms of service that would make them unacceptable. Alternatively, some solutions (such as the \emph{NextCloud} stack, or the \emph{FreedomBox} distribution) allows users to set up their own domestic cloud using a dedicated server or edge device such as a home gateway. These approaches however require equipment that users are less likely to possess already compared to laptops or smartphones. 

There have been several fully implemented attempts at P2P storage, mostly for backup, such as \emph{Wuala}\footnote{http://www.wuala.com} (later changed to a client-server architecture, now closed down), \emph{Farsite}~\cite{farsite} (no longer in use), \emph{Nebulostore}~\cite{nebulo} (maintained but not deployed). They deliberately use storage and replication on other peers. Even though the privacy risks of these solutions is reduced compared to central providers, we avoid any form of replication in \ac{SPORES} voluntarily, both to limit unneeded storage overheads, and to increase privacy guarantees.

P2P file sharing has been researched extensively, with respect to aspects such 
as architecture (starting with the semi-centralized Napster, then decentralized 
Gnutella), availability and replication~\cite{replica}, scalability 
(Bittorrent~\cite{bittorrent-incentives}), anonymity 
(Freenet~\cite{Clarke:2001}, Tor, and \acp{DHT} such as CAN, Chord, 
Pastry, and Tapestry, see~\cite{dhtchurn} for an overview). In contrast to our 
work, these efforts principally aimed at enabling dissemination to many users 
who do not necessarily know each other in person. With \ac{SPORES}, we focus on 
sharing files in a more deliberate yet ad-hoc manner, \ie between pairs of 
users that out-of-band agree to share a file but do not keep it available for 
anyone else in the future. 

Mixnets~\cite{Chaum:1981} are perhaps the first solution to turn to for sending content from A to B anonymously. In our context, however, they are less suitable due to their reliance on mix servers, the limited protection against statistical inference possible for even a perfect mixnet given the multiple varying sources and destinations of our use case, and the delay they would add due to batching. We thus decided for an approach based on onion routing, which also entails sender-receiver anonymity.

Onion routing schemes, with infrastructure and governance (Tor) and 
without (I2P\footnote{https://geti2p.net/en/}), though geared toward web 
browsing, come closest to file transfer without third-party storage. They do 
not, however, allow for unreliable user devices as relay nodes, as we do. 

The main concern arising from unreliable nodes, which is shared with traditional P2P file sharing, is \emph{churn}~\cite{dhtchurn} and its effect on availability. % - here in the narrow context of the set of user devices based on user behavior. 
Most P2P approaches have addressed churn in the past by combining in various ways \emph{data replication} (e.g. by storing the same file chunk on multiple nodes) and \emph{routing redundancy} (e.g. by maintaining multiple independent paths to the same node). Data replication does not work in our case as we prioritize privacy and independence from third-party storage. The probabilistic onion routing we propose can be interpreted as a form of routing redundancy, albeit one that is built from the ground up to ensure strong privacy guarantees.

% The commonly used approach of replication and redundancy used to handling churn does not work in our case as we prioritize privacy and independence from third-party storage.  

% We thus discuss the related work on modeling and predicting device availability next, though to the best of our knowledge we are the first to make use of such predictions to cope with churn in interoperating sets of user devices. 

% %\sonja*{include some on Modeling devices' connection and disconnection} 

% %\commentAL{Will need another pass.}
% %\paragraph*{Modeling devices' connection and disconnection} 
% To simulate users' devices participating in a distributed protocol, we build upon existing literature on two topics: 
% multi-device interaction, and churn in P2P networks. 

% In our experiments, we simulate users' devices participating in a distributed protocol. We base our modeling of devices' online availability on existing literature such as the following.  
% Field studies provide \emph{usage and connectivity patterns of users' appliances}. Karlson et al. \cite{Karlson_Meyers_Jacobs_Johns_Kane_2009} studied the compared usage of the laptop and smartphone of 16 information workers and show that their participants use their smartphones very regularly throughout the day to do background tasks (\eg answering mails or checking their agenda). Their laptop is online less often, and is dedicated to the most demanding tasks. Wagner et al. \cite{Wagner_Rice_Beresford_2013} conducted a thorough data collection on Android devices via an application called Device Analyzer, that collected metrics on movement patterns, connectivity and energy consumption from 16,000 users.
% %\commentAL{Conclude: will we use their dataset? Why are these papers useful to us?}
% Several works point out the emerging trend of \emph{multi-device interaction}.
% A 2012 Google-led study \cite{google2012} stated that the USA are nowadays ``a nation of multi-screeners''. People switch their attention toward their phone, laptop, tablet or their television depending on the context.
% M\"uller et al. \cite{Muller_Gove_Webb_Cheang_2015} specifically compared the usage patterns of phones against tablets.
% Jokela et al. \cite{Jokela_Ojala_Olsson_2015} and \cite{google2012} also differentiated sequential and parallel usage of one's multiple devices.
% Research in P2P networks observed \cite{Stutzbach_Rejaie_2006} and modeled \cite{Yao_Leonard_Wang_Loguinov_2006} patterns of \emph{churn} (\ie participants moving in and out of a system).
% We take inspiration from these works in order to establish credible models of user behaviors to evaluate our protocol. 
% Participants can own several devices: their smartphone is always on, but lacks processing power, while their laptop is rarely online, though it contains better hardware, etc. 



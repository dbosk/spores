\subsection{The Global Overlay}
\label{sec:global_overlay}

\commentDaniel{%
  We must cover above how to compute \(p_d\) below, \ie the probability of being 
  online.
  We need this for \cref{ExtendRoute}.%
}

\commentDaniel{%
  What is the probability distribution of the peer sample that we get?
  Will it be close to uniformly random?
  I need this for the security analysis.%
}

\NewAlgorithm{\GetRandomPeer}{GetRandomPeer}

Every time a device is online, it participates in the random peer sampling 
protocol.
If a device is sampled it provides the following information:
\begin{itemize}
  \item its address, $@_d$;
  \item its public key, \(\pk_d\);
  \item the probability of being online, $p_d=P\left[d \in O_{t+1} | S_t\right] $.
\end{itemize}
We will denote this by the following algorithm $(@_d, \pk_d, p_d)\gets 
  \GetRandomPeer$, which will be used below.
The probability of being online, \(p_d\), is inferred as above 
(\ref{sub:a_model_of_the_user_s_behavior}).

